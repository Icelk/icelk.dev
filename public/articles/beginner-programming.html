!> tmpl standard.html markdown.html
$[head]
    $[highlight]
    <title>An introduction to full-stack development.</title>
    <meta name="description" content="Get started with full-stack development,
    web programming both UI in HTML, CSS, and JavaScript
    and building web servers in Rust">
    <meta name="permalinks" content="not-titles">
$[dependencies]$[md-imports]$[close-head]$[navigation]
<main><md><h1 id="an-introduction-to-programming">An introduction to programming</h1>
<blockquote>
<p>Covers basic concepts and guides you through three projects, using web technologies and Rust.</p>
</blockquote>
<p>Welcome to my <strong>introduction to programming</strong>!
This is targeted to those who have <strong>no previous experience</strong>; everybody can follow along!</p>
<blockquote>
<p>If you find any errors or sections in need of improvement, <a href="mailto:Icelk%3Cmain@icelk.dev%3E?subject=Article:%20Introduction%20to%20programming&amp;body=I%20have%20some%20suggestions...">mail me</a>.
Also, if you find this introduction helpful, <strong>consider sharing</strong>.</p>
</blockquote>
<p>First I‚Äôll cover how you can follow along in this guide.
Then, I‚Äôll cover the basics and answer what a programming language is.</p>
<h2 id="jump-to">Jump to‚Ä¶</h2>
<table><thead><tr><th>Contents</th></tr></thead><tbody>
<tr><td><a href="#an-introduction-to-programming">1 An introduction to programming</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#jump-to">1.1 Jump to‚Ä¶</a></td></tr>
<tr><td><a href="#follow-along">2 Follow along</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#code-online">2.1 Code online</a></td></tr>
<tr><td><a href="#the-basics">3 The basics</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#functions">3.1 Functions</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#variables">3.2 Variables</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#comments">3.3 Comments</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#accessing-properties-and-methods">3.4 Accessing properties and methods</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#control-flow">3.5 Control flow</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#example-saying-hello">3.6 Example: Saying hello[]</a></td></tr>
<tr><td><a href="#sharing-code">4 Sharing code</a></td></tr>
<tr><td><a href="#similarities-what-is-a-programming-language">5 Similarities; what is a ‚Äúprogramming language‚Äù?</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#syntax">5.1 Syntax</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#builtins">5.2 Built-ins</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#style">5.3 Style</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#example-saying-hello-in-multiple-languages">5.4 Example: Saying hello[] in multiple languages</a></td></tr>
<tr><td><a href="#project-lets-learn-how-to-count">6 Project: Let‚Äôs learn how to count!</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#boilerplate">6.1 Boilerplate</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#div-h1-p-and-button">6.2 div, h1, p, and button</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#lets-add-some-elements">6.3 Let‚Äôs add some elements</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#store-references-globally">6.4 Store references globally</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#events">6.5 Events</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#oh-no--1">6.6 Oh no! * 1</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#optional-double-the-number-every-time-instead">6.7 Optional: Double the number every time instead</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#optional-styling">6.8 Optional: Styling</a></td></tr>
<tr><td><a href="#summary">7 Summary</a></td></tr>
<tr><td><a href="#what-is-the-web">8 What is the web?</a></td></tr>
<tr><td><a href="#git-it">9 Git it?</a></td></tr>
<tr><td><a href="#project-what-to-do-a-todo-list">10 Project: What to do? A to-do list!</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#structure">10.1 Structure</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#modifying-html">10.2 Modifying HTML</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#connect-javascript">10.3 Connect JavaScript</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#generate-content">10.4 Generate content</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#tying-it-all-together">10.5 Tying it all together</a></td></tr>
<tr><td><a href="#iterative-improvement-st-i-reloaded-lets-save-our-lists">11 Iterative improvement: S#¬°t, I reloaded. Let‚Äôs save our lists!</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#getting-the-data">11.1 Getting the data</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#reading-the-saved-items">11.2 Reading the saved items</a></td></tr>
<tr><td><a href="#iterative-improvement-saving-our-list-on-a-server">12 Iterative improvement: Saving our list on a server</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#prelude-">12.1 Prelude (download Rust!)</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#the-fetch-api">12.2 The Fetch API</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#putting-it-in-the-right-place">12.3 Put**ting it in the right place</a></td></tr>
<tr><td><a href="#project-i-dont-trust-this-serverowner-imma-build-my-own">13 Project: I don‚Äôt trust this server-owner. Imma build my own!</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#rust-is-stricter">13.1 Rust is stricter</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#using-kvarn">13.2 Using Kvarn</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#how-to-store-the-data">13.3 How to store the data?</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#logging">13.4 Logging</a></td></tr>
<tr><td><span style="margin-left: 2em"></span> <a href="#receive-the-data">13.5 Receive the data</a></td></tr>
<tr><td><a href="#conclusion">14 Conclusion</a></td></tr>
<tr><td><a href="#further-reading">15 Further reading</a></td></tr>
</tbody></table>
<h1 id="follow-along">Follow along</h1>
<p>Trying it out for yourself is the best way to learn programming.</p>
<p>An overwhelming number of tools exist, so it‚Äôs tough to choose one broad enough (and good enough) to get started with and learn.
I recommend <em>VS Code</em> (or rather <a href="https://github.com/VSCodium/VSCodium/">Codium</a>, a completely free (as in freedom) variant)
as it supports virtually all languages and has excellent features.</p>
<blockquote>
<p>See <a href="https://github.com/VSCodium/VSCodium/#why-does-this-exist">this section</a> for info on why it‚Äôs important to not use Microsoft‚Äôs ‚Äúofficial‚Äù download.</p>
</blockquote>
<p>Press the <code>Releases</code> button on the middle right and download the file for your operating system.</p>
<h2 id="code-online">Code online</h2>
<p>If you want to educate a broader audience and found this article, consider using my
<a href="https://icelk.dev/articles/code-online.">VS Code setup for online development</a>.
All users get their own VS Code in the browser with all the features of the desktop version.</p>
<blockquote>
<p>To set it up requires you to have technical know-how and comfort with the shell.</p>
</blockquote>
<h1 id="the-basics">The basics</h1>
<p>First we‚Äôll cover the basics.
This will give you the knowledge needed to build a simple counter which increments (adds) when you press a button.</p>
<blockquote>
<p><strong><em>Note on running the examples</em></strong>: The following examples can be ran by right-clicking on this web page, then <code>Inspect</code>.
You have now opened the <code>Developer tools</code>. Find the <em>console</em> tab in the top. There, you can paste the code you find here.</p>
</blockquote>
<p>For some reason (probably lazyness, it‚Äôs hard to write capitals) programmers usually use all lowercase names.
Try to keep this in mind.</p>
<h2 id="functions">Functions</h2>
<p>A function takes data (anything; text, numbers, lists, other data structures),
changes it and also possibly it‚Äôs environment (anything you see the program doing; changing files on your computer, showing info to you),
and returning something (which can be nothing).</p>
<p>Example:</p>
<pre><code class="language-javascript">// We define a function called `multiply`, which takes two arguments; `x` and `y`.
function multiply(x, y) {
    return x * y
}

// Read &quot;let eight be multiply two with four
let eight = multiply(2, 4)
// `eight` is 8!
</code></pre>
<p>We often use parentheses <code>()</code> to call (run) them.
The text between the parentheses is the input to the function.
You can have multiple inputs, separated by <code>,</code>. The type of data and count of arguments have to match in the function definition and where it‚Äôs called.</p>
<p>In the example above, <code>2</code> is <code>x</code> and <code>4</code> is <code>y</code> in the function.</p>
<blockquote>
<p>These <em>arguments</em> are sensitive to order; if a function takes two inputs, you have to write them in the right order.</p>
</blockquote>
<h2 id="variables">Variables</h2>
<p>Variables store data. See <code>eight</code> above, a variable holding the number <code>8</code>.</p>
<h2 id="comments">Comments</h2>
<p>It‚Äôs crucial to write reminders and reasons for the code you write.
This is called <em>comments</em>.
In these examples, anything after <code>//</code> is a comment; excluded from the logic of the code.</p>
<h2 id="accessing-properties-and-methods">Accessing properties and methods</h2>
<p>The data variables store can have <em>properties</em> and <em>methods</em>.
Properties are data part of the ‚Äúbigger object‚Äù.
Methods are functions (which use parentheses to take data or arguments)
which use the data of the ‚Äúbigger object‚Äù, both viewing it and changing it.
You can think about it as the method taking a reference to the ‚Äúbigger object‚Äù.</p>
<p>These both are accessed by a dot <code>.</code></p>
<pre><code class="language-javascript">let person = {
    name: &quot;Icelk&quot;,
}
console.log(person.name)
</code></pre>
<p>This creates a <code>person</code> with a name <code>Icelk</code>.
We log (write the text from the function input to the <code>console</code>) the <code>name</code> <em>property</em> of <code>person</code>.
<code>console</code> is a <em>object</em> with several methods and properties, one of them being <code>log</code>, which takes text (called a <code>string</code>), in this example <code>Icelk</code>.</p>
<h2 id="control-flow">Control flow</h2>
<p>It‚Äôs good to do different things depending on input; otherwise all computer programs would do the exact same thing every time.
It would mean no input, no new websites, no new features. That‚Äôs not good!</p>
<p>The main concept of control flow is <em>if else</em>. Take this example:</p>
<pre><code class="language-javascript">// Math.random() returns a number between 0 and 1
let randomValue = Math.random()

if (randomValue &gt; 0.8) {
    console.log(&quot;We are very lucky! ü•†üçÄ&quot;)
} else if (randomValue &gt;= 0.5) {
    console.log(&quot;50-50&quot;)
} else {
    console.log(&quot;We had bad luck üòî&quot;)
}
</code></pre>
<p>The same <code>{ }</code> brackets are used for separating code in control flow as in functions.</p>
<blockquote>
<p>Why the <code>( )</code> parentheses are used around the <em>predicate</em> (logic resulting in <code>true</code> or <code>false</code>),
nobody knows. We‚Äôll cover this later, but in the meantime, just add them.</p>
</blockquote>
<h2 id="example-saying-hello">Example: Saying hello[]</h2>
<pre><code class="language-javascript">function sayHello(names) {
    // Lists have a method called `forEach`,
    // which runs the code in the { } for every element in the list.
    names.forEach(function (name) {
        // The `${name}` becomes the value of the variable named `name` when it's ran.
        console.log(`Hello ${name}!`)
    })
}

let friends = [&quot;Arnold&quot;, &quot;Carl&quot;, &quot;Bob&quot;]
sayHello(friends)
</code></pre>
<p>Here, we define a function called <code>sayHello</code>, which takes one <em>argument</em> (input), a <em>array</em> (list) of names.</p>
<p>It calls the <em>method</em> <code>forEach</code> on <code>names</code>. We then define a ‚Äúanonymous‚Äù function
which will be ran for each element in the list, with the element as the first and only <em>argument</em>.</p>
<p>We then <code>console.log</code> the name.</p>
<p>Notice the ` (backticks) around <code>Hello</code>.
This enables us to use¬†${name} to show the name variable in the text.</p>
<p>This code, if run, prints</p>
<pre><code class="language-text">Hello Arnold!
Hello Carl!
Hello Bob!
</code></pre>
<h1 id="sharing-code">Sharing code</h1>
<p>It would be impossible to build everything from the ground up every time we developers want to make a new product.
We therefore reuse most of the code our product uses, and only write a fraction ourselves.</p>
<p>This is enabled by a concept called <em>open source</em>, that you share your work under a permissive license
(anyone can use the code for anything).</p>
<blockquote>
<p>Building apps on the web is a relatively easy thing to do; a lot of code goes in to making it easy to program and fast for the user.</p>
</blockquote>
<p>See <a href="https://youtu.be/JMWNYfPIF2U">this video</a> for a overview of the layers of code used to run your website.</p>
<h1 id="similarities-what-is-a-programming-language">Similarities; what is a ‚Äúprogramming language‚Äù?</h1>
<p>You have probably heard the term ‚Äúprogramming language‚Äù before.</p>
<p>Like languages, programming languages all strive after the same goal (communication or software) but achieve it
with different quirks, style, grammatical rules (called <em>syntax</em> in programming),
and vocabularies (in a programming language, there exists several <em>keywords</em>, reserved words used)</p>
<blockquote>
<p>These <em>keywords</em> include the <code>if else</code> we‚Äôve used, <code>function</code>, and <code>let</code> to define a variable.</p>
</blockquote>
<h2 id="syntax">Syntax</h2>
<p>The formal ‚Äúrules‚Äù of a programming language is called the syntax.
It‚Äôs where and when the parentheses <code>( )</code>, <code>{ }</code>, and <code>[ ]</code> should be placed,
where commas and dots should be, how the keywords are used (<code>function</code>, <code>if else</code>).</p>
<p>This differers between languages, though must languages are ‚ÄúC-like‚Äù;
they follow syntactic rules inherited from the ‚Äúfirst‚Äù programming language, C.</p>
<h2 id="builtins">Built-ins</h2>
<p>To enable basic functionality (e.g. reading files, showing text in the console, networking),
each programming language provides some ‚Äúbuilt-in‚Äù functions, objects, and methods.</p>
<p>These naturally differ between languages.</p>
<p>This and syntax is virtually the only differences between programming languages.</p>
<h2 id="style">Style</h2>
<p>To make code appear nicer, we programmers build formatters to automatically set right indentation,
break apparat long lines, move parentheses, and much much more.</p>
<p>There also exits <em>naming conventions</em>; how to capitalise words. In the language you‚Äôve seen examples in so far,
the norm is to name everything like this <code>icelkFavouritePet</code>, with capitalised words after the first.
In Rust, VS Code (if you‚Äôve installed the <code>Rust</code> extension) tells you to change the name, and provides a button which does it for you.</p>
<p>Note how this is handled in Rust later on.</p>
<blockquote>
<p>Variables can‚Äôt have spaces in them, else the computer would have a <em>very</em> hard time understanding what you wrote,
which results in these odd <em>naming conventions</em>.</p>
</blockquote>
<blockquote>
<p>Some languages, such as Python, are sensitive to indentation. Where the examples we‚Äôve seen have <code>{ }</code>, Python only reads the indentation level.</p>
</blockquote>
<h2 id="example-saying-hello-in-multiple-languages">Example: Saying hello[] in multiple languages</h2>
<p>To show the differences, I‚Äôll write the example from above in Rust too.</p>
<p>JavaScript (the previous example)</p>
<pre><code class="language-javascript">function sayHello(names) {
    names.forEach(function (name) {
        console.log(`Hello ${name}!`)
    })
}

let friends = [&quot;Arnold&quot;, &quot;Carl&quot;, &quot;Bob&quot;]
sayHello(friends)
</code></pre>
<p>Rust</p>
<pre><code class="language-rust">fn say_hello(names: &amp;[&amp;str]) {
    for name in names {
        println!(&quot;Hello {}!&quot;, name);
    }
}

fn main() {
    let friends = [&quot;Arnold&quot;, &quot;Carl&quot;, &quot;Bob&quot;];
    say_hello(&amp;friends);
}
</code></pre>
<p>We have a few things to note.</p>
<p>First, <code>function</code> becomes <code>fn</code>.</p>
<p>Second, we add <code>;</code> semicolons to the end of declarations of variables and function calls.</p>
<p>Third, we use the <code>&amp;</code> and sign to pass a <em>reference</em>. This tells Rust the <code>say_hello</code> function only needs to read the names, not change them.</p>
<p>Fourth, the code which calls <code>say_hello</code> is in another function called <code>main</code>. This function is called when you execute (run) the program,
while JavaScript runs all code not in functions.</p>
<p>Fifth, the <code>say_hello</code> function has a lowercase n with a underscore between the words. This is the norm in Rust.</p>
<p>Sixth, the <code>say_hello</code> function takes <code>names: &amp;[&amp;str]</code>. In a faster language such as Rust, this is needed to avoid complications in the program.
It tells the computer to take a reference of an array (list) <code>[ ]</code> of <code>&amp;str</code>, <strong>str</strong>ing references (<code>&amp;</code>). This, as I told before, tells the program
to only take a readable reference; we won‚Äôt change the names.</p>
<blockquote>
<p>Some say the sixth point increase robustness and readability, as the types of the data is explicit.</p>
</blockquote>
<p>Seventh, the code to loop each element in the array <code>names</code> is different. This is built in to Rust (which is a newer language), but a method is needed in JavaScript.</p>
<p>Eighth, and last, after the function <code>println</code> (print line), a exclamation mark <code>!</code> is placed before it‚Äôs parentheses. This is because it‚Äôs a <em>macro</em>.
You don‚Äôt need to know this, so skip this if you‚Äôre not curious. A macro generates more code; the <code>println!(&quot;Hello {}!&quot;, name)</code> expands to more code before it‚Äôs run.
This enables special arguments to be used. The <code>{}</code> becomes the value of <code>name</code>. This wouldn‚Äôt be possible using standard functions, as they have to take a defined number of arguments.</p>
<h1 id="project-lets-learn-how-to-count">Project: Let‚Äôs learn how to count!</h1>
<p>It‚Äôs high time to practical learning. You are going to build a button which increments (adds) a number shown on the screen.</p>
<p>HTML (HyperText Markup Language) is the syntax of how to tell the browser to display certain elements.</p>
<blockquote>
<p>Spaces and newlines do (mostly, don‚Äôt worry!) not matter. Keep this in mind;
you can split sentences over multiple lines in your code to make it easier to read without effecting the product shown in the browser.</p>
</blockquote>
<p>You can compare HTML, JavaScript, and CSS (styling to make the website look pretty) to writing a document.
CSS being the style,
HTML the position of paragraphs and grouping of text,
and JavaScript the animations and other complex behaviour.
JavaScript can do everything, including changing the HTML, handling payments, and executing game logic.</p>
<h2 id="boilerplate">Boilerplate</h2>
<p>To set up the document, you can type the <code>!</code> exclamation mark in VS Code and hit tab, <code>‚Üπ</code>.</p>
<p>Now, tab through the selected values (which leaves them by their defaults) but change the title; it‚Äôs the text in the tab on the top of your browser.</p>
<blockquote>
<p>As you see, every tag which contains text or other elements have a corresponding closing tag. This is <strong>important</strong>.</p>
</blockquote>
<p>The <code>&lt;head&gt;</code> section contains metadata (data or information not shown in the website but used by the browser and search engine to compose the page).
We will not touch it for now.</p>
<p>The <code>&lt;body&gt;</code> section contains all elements. In HTML (the markup language you‚Äôre going to write your website in) a element is a tag, such as <code>&lt;button&gt;</code> which can have attributes, <code>&lt;button id=&quot;my-button&quot;&gt;</code>, and often a text or other elements with a closing tag, in this case <code>&lt;/button&gt;</code>.</p>
<h2 id="div-h1-p-and-button">div, h1, p, and button</h2>
<p>To start with HTML, it‚Äôs good to know 4 tag types.</p>
<p><code>&lt;div&gt;</code> is a container; it‚Äôs invisible but contains other elements. Each div takes up the whole vertical space; you can‚Äôt have two divs beside each other.</p>
<p><code>&lt;h1&gt;</code> stands for ‚Äúheading 1‚Äù, the first heading type. There exists 6, with 1 being the largest.</p>
<p><code>&lt;p&gt;</code> stands for ‚Äúparagraph‚Äù. Well, it‚Äôs a paragraph‚Ä¶</p>
<p><code>&lt;button&gt;</code> can trigger JavaScript code when it‚Äôs pressed and appears as a button to the user.</p>
<p>Divs, headings, and paragraphs share a important property. When the browser lays out the text and content, these all take up 100% of the horizontal space. If you changed the background of a heading, only the height it takes up would be the set color, but the whole horizontal space would become said colour.</p>
<p>This is unlike the button, which by default (yes, this can be changed, both for buttons and all the above) is <em>inline</em>; when placing two after each other they appear on the same ‚Äúline‚Äù.</p>
<blockquote>
<p>Remember, spaces and newlines do not matter in HTML.</p>
</blockquote>
<h2 id="lets-add-some-elements">Let‚Äôs add some elements</h2>
<p>After typing <code>!</code> (and saving the document as <code>index.html</code>), your document should look something like this</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot; /&gt;
        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
        &lt;title&gt;My website!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>To reduce the clutter, you can remove the first two <code>&lt;meta&gt;</code> tags. They are mostly redundant.</p>
<p>The <code>name=&quot;viewport&quot;</code> meta tag makes the website look larger on smaller displays (mobile devices).</p>
<blockquote>
<p>If you have access to a phone and if your code is stored online,
try changing the value of <code>initial-scale</code>, <strong>after we‚Äôve added some content</strong>,
and see how it changes the scale of the elements.</p>
</blockquote>
<p>Now, lets add a <code>&lt;h1&gt;</code> (do this by typing <code>h1</code> and pressing tab in VS Code) tag
and a <code>&lt;button&gt;</code> (same as before, type <code>button</code> and press tab) under it.
Type a <code>0</code> between the opening and closing tags of the heading and <code>Add to counter</code> as the buttons text.
Your HTML should now look like this</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
        &lt;title&gt;My website!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;0&lt;/h1&gt;
        &lt;button&gt;Add to counter&lt;/button&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<blockquote>
<p>If you do not have colours in your editor, make sure it‚Äôs saved a file ending in <code>.html</code>.
The <em>file extension</em> (the text after the last period) defines how the syntax highlighting
(colours. Syntax from how the code is structured and highlighting from the definition of highlighting; to make it clear)
should be applied.</p>
</blockquote>
<p>If you access the file, you should see a large <code>0</code> and a button which does nothing. Let‚Äôs fix it!</p>
<h2 id="store-references-globally">Store references globally</h2>
<p>To interact with the HTML, we need to store references to the elements. To get a reference, the elements need to have id‚Äôs.</p>
<p>Set the heading to have the id <code>heading</code> and the button to have the id <code>button</code>. These id‚Äôs only need to be specified in the opening tag.</p>
<p>Now, the elements you added should look like this.</p>
<pre><code class="language-html">&lt;h1 id=&quot;heading&quot;&gt;0&lt;/h1&gt;
&lt;button id=&quot;button&quot;&gt;Add to counter&lt;/button&gt;
</code></pre>
<p>After the button and heading, add a <code>&lt;script&gt;</code> tag. In it, you can write JavaScript
(the programming language the examples in this article are written in)
which is executed as it‚Äôs read in the document.</p>
<p>Spaces and newlines mostly do not matter in JavaScript. We use them to make it easier to read.</p>
<blockquote>
<p>Notice the <code>&quot;</code>. They mean the text inside is a string. A id is a string.
If you put the closing parentheses <code>)</code> inside the <code>&quot;&quot;</code>, JavaScript thinks it‚Äôs part of the id.</p>
</blockquote>
<p>In the script tag, put this</p>
<pre><code class="language-javascript">let heading = document.getElementById(&quot;heading&quot;)
let button = document.getElementById(&quot;button&quot;)
</code></pre>
<p>Now, we‚Äôve acquired references to JavaScript <em>objects</em> with <a href="#accessing-properties-and-methods">methods and properties</a> which we can interact with.</p>
<h2 id="events">Events</h2>
<p>We want to execute some code when the user clicks the button. In JavaScript, this is handled with <em>events</em>;
we attach a function which is ran every time the <em>event</em> we are listening to happens.</p>
<p>Add this after the references (the <code>let ... = ...</code> code you‚Äôve just added).</p>
<pre><code class="language-js">button.addEventListener(&quot;click&quot;, function () {
    // The user clicked the button.
    // Increment the heading's text.
    heading.innerText = heading.innerText + 1
})
</code></pre>
<p>The heading has a property called <code>innerText</code> which contains the text of the heading.</p>
<p>Now, open your file in a browser. See what happends when you press the button.</p>
<p>Your file should look like this.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
        &lt;title&gt;My website!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 id=&quot;heading&quot;&gt;0&lt;/h1&gt;
        &lt;button id=&quot;button&quot;&gt;Add to counter&lt;/button&gt;

        &lt;script&gt;
            let heading = document.getElementById(&quot;heading&quot;)
            let button = document.getElementById(&quot;button&quot;)

            button.addEventListener(&quot;click&quot;, function () {
                // The user clicked the button.
                // Increment the heading's text.
                heading.innerText = heading.innerText + 1
            })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="oh-no--1">Oh no! * 1</h2>
<p>The number isn‚Äôt incremented, a <code>1</code> is just added to the end of the text.</p>
<p>To increment the number, we first need to convert it to a number, then increment it,
and then set that number as the text
(JavaScript handles the conversion from a number to a string (text)).</p>
<p>To convert text to a number, we can multiply the text with one.
This is a mathematical operation only available on numbers; JavaScript has to convert the text to a number.</p>
<blockquote>
<p>Because multiplying a number with 1 does nothing, this won‚Äôt change the number.</p>
</blockquote>
<p>Change the line setting the text to this</p>
<pre><code class="language-js">heading.innerText = heading.innerText * 1 + 1
</code></pre>
<p>Now it should work!</p>
<p>To make this more flexible, we can move the code to a separate function.</p>
<p>Add this beneath the end of the <code>addEventListener</code> call.</p>
<pre><code class="language-js">function addToHeader(amount) {
    heading.innerText = heading.innerText * 1 + amount
}
</code></pre>
<p>and call this function from the event listener instead of changing the value manually;</p>
<pre><code class="language-js">button.addEventListener(&quot;click&quot;, function () {
    addToHeader(1)
})
</code></pre>
<p>Now the code should look like this</p>
<pre><code class="language-js">let heading = document.getElementById(&quot;heading&quot;)
let button = document.getElementById(&quot;button&quot;)

button.addEventListener(&quot;click&quot;, function () {
    // The user clicked the button.
    // Increment the heading's text.
    addToHeader(1)
})

function addToHeader(amount) {
    heading.innerText = heading.innerText * 1 + amount
}
</code></pre>
<blockquote>
<p>Try changing the input <code>amount</code> in the call to <code>addToHeader</code> to be any other number;
the counter will increment with that amount every time you press the button.</p>
</blockquote>
<h2 id="optional-double-the-number-every-time-instead">Optional: Double the number every time instead</h2>
<p>You need to change the <code>addToHeader</code> function.</p>
<blockquote>
<p>Tips: Multiply by amount and remove the <code>+ amount</code>. Now pass <code>2</code> to the <code>addToHeader</code> function.</p>
</blockquote>
<h2 id="optional-styling">Optional: Styling</h2>
<p>If you want to make the website look pretty, you can add CSS. This is defined in the <code>&lt;head&gt;</code> of the document.</p>
<p>Paste this code after the closing <code>&lt;/title&gt;</code> tag.</p>
<blockquote>
<p>Remember, it can be on the next line, spaces and newlines do not matter in HTML.</p>
</blockquote>
<pre><code class="language-css">&lt;style&gt;
    /* Notice that the comments need a closing part too!
    This means they can span several lines. */
    :root {
        /* Set the height to 100% so the body can take up all the space (else centrering won't work) */
        height: 100%;
    }

    body {
        /* See comment above */
        height: 100%;

        /* This is a advanced layouting option */
        display: flex;
        /* Set the layout to be in columns (we want one column, the button under the heading), not rows which is the default */
        flex-direction: column;
        /* These two center the content vertically and horizontally */
        align-items: center;
        justify-content: center;

        /* Self-explanatory */
        background-color: black;
        /* Sets the text colour to `wheat` */
        color: wheat;
    }

    button {
        /* Set the background colour and text colour */
        background-color: wheat;
        color: black;
    }
&lt;/style&gt;
</code></pre>
<p>You can change the colours to hex colours (a colour on computers are represented as three values for each chanel in RGB (red, green, blue).
Hex colours is a format to store this in a compact 6-character long string).</p>
<p><a href="https://duck.com/?q=%22colour+picker%22">Search for ‚Äúcolour picker‚Äù</a> and change the colour. Then copy the value at the bottom with a <code>#</code> prefixed.</p>
<p>You can then paste the hex colour in the places where a colour is applicable with a <code>#</code> prefixed.
<code>#3f3f3f</code> is a grey.
<code>#6699dd</code> is a light blue colour not unlike the one used on <a href="https://icelk.dev">icelk.dev</a>.</p>
<h1 id="summary">Summary</h1>
<p>So far, you‚Äôve learned all the basics needed to build complex web apps.</p>
<p>Next, we are going to learn a bit about how the web works, the client-server and request-response model,
and Git.</p>
<p>In a few minutes, you‚Äôre going to start building a to-do list.</p>
<h1 id="what-is-the-web">What is the web?</h1>
<p>Not so long ago (before I went head-first into the backbone of the web with my project <a href="https://kvarn.org">Kvarn</a>), I thought of the web
as a static thing. Websites are always available. I didn‚Äôt think further.</p>
<p>When you open a website (for example this very page), a request is sent from your browser to the server hosting the website.
That request is encoded to protect your data, sent through countless servers which relay your data
(also called the Internet. Don‚Äôt know if you‚Äôve heard of it ¬Ø\_(„ÉÑ)_/¬Ø).</p>
<p>At the other end a <em>web server</em>, such as Kvarn (which is handling your requests to this site), handles the request and creates a response,
which it sends back to you, with the same procedure as when you sent the request.
Your browser then interprets this and eventually shows a website to you. This all usually takes under a second.</p>
<p>To recap, my code takes the info your browsers code transmitted on your request and sent a response back to you.
<strong>It‚Äôs all code!</strong></p>
<p>When the content is showed to you on your browser, three main languages are used;
HTML for the markup text (what is showed),
JavaScript for interactive changes,
and CSS for styling, layouting, colour, font, and all other appearance-related things.</p>
<h1 id="git-it">Git it?</h1>
<p>A prerequisite to Git (which you‚Äôll learn more about soon) is the terminal.
Assuming you‚Äôre using VS Code, you can access the integrated terminal (there also exists separate programs to access it)
by hovering over the top edge of the bottom bar (you should see a arrow pointing up), pressing and holding, and dragging it up.</p>
<p>This is a <strong>very powerful tool</strong> and should be handled with care. <strong><em>Never</em></strong> Paste in <strong>any</strong> code you do not completely understand.
It can destroy the entire system. Git is <em>completely safe</em>.</p>
<p>You are always inside a <em>directory</em> (folder on you computer).
The directory you are in is called the <em>current working directory</em> (CWD).
You can test it by typing <code>pwd</code> (print working directory) and hitting enter.
Most actions are relative to it, including Git.</p>
<p>To interact with the system, we execute programs by their name and give them arguments, and hit enter.</p>
<blockquote>
<p>To see the files in the CWD, type <code>ls</code> and hit enter. Try <code>ls -lA</code> for more info.
Here, <code>ls</code> is the program and <code>-la</code> a argument to get a list with all items.
You should see the same files as the explorer in VS Code.</p>
</blockquote>
<p>To change directory, use the <code>cd</code> program. To navigate to a folder named <code>web</code> in the CWD, type <code>cd web</code>.
To go to the parent directory (up one folder), use <code>cd ..</code>. <code>..</code> is always the parent directory.</p>
<blockquote>
<p>Say you are in the previously mentioned <code>web</code> directory, executing <code>cd ../web</code> would do nothing;
you first go to the parent, then back down to the directory you are already in.</p>
</blockquote>
<p>If a program takes a long time to finish, you can press and hold <code>Ctrl</code> and press <code>c</code> to terminate a program.
This can be used to abruptly stop the program.</p>
<p>To start of, watch <a href="https://youtu.be/hwP7WQkmECE">this great video from the YouTube channel Fireship</a>.
His channel has tons of great content, for all levels of skill.</p>
<blockquote>
<p>Feel free to pause and try out what he‚Äôs talking about.</p>
</blockquote>
<p>You can also play around in VS Code‚Äôs Git integration.
It‚Äôs located in the left <em>Activity Bar</em>
and looks like three dots connected by two lines.</p>
<p>Here are some of the Git commands mentioned.</p>
<blockquote>
<p>The <code>$</code> at the start means it should be executed by a user,
not a administrator (called superuser or root in programming)
and should not be included in the command you execute.</p>
</blockquote>
<p>To initiate a new Git repo, use</p>
<pre><code class="language-shell">$ git init
</code></pre>
<p>To stage changes in files for a commit</p>
<pre><code class="language-shell">$ git add &lt;file or . (a dot) for all files in the current working directory&gt;
</code></pre>
<p>To commit them to Git use</p>
<pre><code class="language-shell">$ git commit -m &quot;Message&quot;
</code></pre>
<p>I recommend making frequent commits; if you‚Äôve changed something and your code works, commit it.
Begin doing this in VS Code, as it‚Äôs simpler.</p>
<h1 id="project-what-to-do-a-todo-list">Project: What to do? A to-do list!</h1>
<p>Since <a href="#the-basics">the basics</a> were quite comprehensive, you don‚Äôt really need to learn anything more to make a to-do list.</p>
<blockquote>
<p>I‚Äôll short JavaScript to JS in this chapter. This is widely used.</p>
</blockquote>
<p>I‚Äôll list a few <a href="#builtins">built-ins</a> in JS you‚Äôll need here. Try to do some of this on your own!</p>
<ul>
<li><code>document.getElementById(id)</code> gets the element with <code>id</code></li>
<li><code>&lt;input type=&quot;text&quot;&gt;</code> shows a small text input field.</li>
<li><code>&lt;input&gt;</code>s can have a <code>placeholder</code> attribute to show a default text when the user hasn‚Äôt written anything yet.</li>
<li><code>&lt;hr&gt;</code> shows a vertical bar, to separate sections.</li>
<li><code>document.createElement(tagName)</code> creates a element with the format <code>&lt;tagName&gt;&lt;/tagName&gt;</code>.
To create a paragraph, use <code>document.createElement(&quot;p&quot;)</code>.
You have to declare this as a variable and later append it to another element. See below.
To create a header and set it‚Äôs test: <code>let header = document.createElement(&quot;h1&quot;)</code> and on the next line <code>header.innerText = &quot;Fun stuff&quot;</code>.</li>
<li><code>parentElement.appendChild(childElement)</code> adds the element <code>childElement</code> just before the closing tag of <code>parentElement</code>.
To add the previously created <code>header</code> (see above) to the end of the document (specifically the end of <code>&lt;body&gt;</code>), add this <code>document.body.appendChild(heading)</code></li>
</ul>
<h2 id="structure">Structure</h2>
<p>We need to define the structure of the document.
Begin with the boilerplate by typing <code>!</code> and pressing tab in a new document.</p>
<p>Try to make a structure which suits this. We need a container (<code>&lt;div&gt;</code>) for the items,
another for the inputs to create a new item,
and another one for the completed items.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
        &lt;title&gt;To-do list&lt;/title&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;div id=&quot;list&quot;&gt;
            &lt;div id=&quot;to-do-items&quot;&gt;
                &lt;!-- Items --&gt;

                &lt;!-- Template item: --&gt;
                &lt;div class=&quot;item&quot;&gt;
                    &lt;input type=&quot;text&quot; placeholder=&quot;Item&quot; /&gt;
                    &lt;input type=&quot;checkbox&quot; /&gt;
                    &lt;!-- a fun character --&gt;
                    &lt;span&gt;‚úò&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div id=&quot;new-item&quot;&gt;
                &lt;input type=&quot;text&quot; id=&quot;new-item-name&quot; placeholder=&quot;Add new item...&quot; /&gt;
            &lt;/div&gt;
            &lt;hr /&gt;
            &lt;div id=&quot;done-items&quot;&gt;
                &lt;!-- Items which are checked --&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="modifying-html">Modifying HTML</h2>
<p>To add items to our list, we‚Äôll need to add HTML from JS.</p>
<p>This can be achieved by using the <code>document.createElement</code> and <code>element.appendChild</code> methods.
See the <code>built-ins</code> list in the start of <a href="#project-what-to-do-a-todo-list">this chapter</a>.</p>
<p>To create a new element visible to the user, we have to:</p>
<ol>
<li>Create the element in JS</li>
<li>Optionally change it‚Äôs parameters, such as <code>innerText</code>, <code>id</code>, etc.</li>
<li>Add it to a already existing element, such as the document body (which can be accessed with <code>document.body</code>)</li>
</ol>
<h2 id="connect-javascript">Connect JavaScript</h2>
<p>To start changing the HTML, we need references to the elements we are going to use.</p>
<p>We are going to declare variables which contain references to the <code>to-do-items</code> container, the <code>new-item-name</code> text input, and the <code>done-items</code> container.</p>
<p>Add a <code>&lt;script&gt;</code> just before the end of the <code>&lt;body&gt;</code> tag.
In said script tag, declare a variable (in the example below, I used <code>todoItems</code>) set to a reference to the element with id <code>to-do-items</code>.
Do the same for all other elements mentioned above.</p>
<p>Your document should now look something like this.</p>
<pre><code class="language-html">...
&lt;body&gt;
    ...
    &lt;script&gt;
        let todoItems = document.getElementById(&quot;to-do-items&quot;)
        let newItemName = document.getElementById(&quot;new-item-name&quot;)
        let doneItems = document.getElementById(&quot;done-items&quot;)
    &lt;/script&gt;
&lt;/body&gt;
</code></pre>
<h2 id="generate-content">Generate content</h2>
<p>Let‚Äôs try to add a new item to the <code>to-do-items</code> container.</p>
<blockquote>
<p>Keep in mind we are working inside the script tag after the <code>list</code> container, before the closing <code>&lt;/body&gt;</code> tag.</p>
</blockquote>
<p>Declare a function which takes a argument named <code>value</code>.
In the function, add this.</p>
<pre><code class="language-js">// Create the item element
let item = document.createElement(&quot;div&quot;)
// Add a class to it. Classes are groups of elements which you can apply styles to.
item.classList.add(&quot;item&quot;)

let name = document.createElement(&quot;input&quot;)
// Set the input type to text
name.type = &quot;text&quot;
// Placeholder when the field is empty
name.placeholder = &quot;Item&quot;
// Set it's value to the argument of the function
name.value = value

let completed = document.createElement(&quot;input&quot;)
// The type of this input is a checkbox
completed.type = &quot;checkbox&quot;

// Span is a container, like div, but for inline elements; it won't be a separate line.
let remove = document.createElement(&quot;span&quot;)
// Set it's text
remove.innerText = &quot;‚úò&quot;
remove.classList.add(&quot;remove&quot;)
// This is to make it tabbable; so it's a stop when you press tab on the website. Important for assistive technologies.
remove.setAttribute(&quot;tabindex&quot;, &quot;0&quot;)

// Append all the elements in order to the item div
item.appendChild(name)
item.appendChild(completed)
item.appendChild(remove)

// Append the div to the todoItems container
todoItems.appendChild(item)

// Return a reference to input.
return name
</code></pre>
<p>This function returns a refernce to the input element of the new item.</p>
<p>After the function, call it. I assume it‚Äôs name is addItem.</p>
<pre><code class="language-js">// This variable declaration isn't needed. You can remove the `let newItem = ` if you aren't going to use it.
let newItem = addItem(&quot;Tell my friends about the great resource icelk.dev!&quot;)
// Focus on the element
newItem.focus()
</code></pre>
<p>This should now have added a new item!</p>
<p>Remove the template item from your HTML; it does not have any functionality that we added in the JS with the event listeners,
we never added them to the template item.</p>
<p>The inside of your script tag should now look like this, but perhaps with some comments.</p>
<pre><code class="language-js">let todoItems = document.getElementById(&quot;to-do-items&quot;)
let newItemName = document.getElementById(&quot;new-item-name&quot;)
let doneItems = document.getElementById(&quot;done-items&quot;)

function addItem(value) {
    let item = document.createElement(&quot;div&quot;)
    item.classList.add(&quot;item&quot;)

    let name = document.createElement(&quot;input&quot;)
    name.type = &quot;text&quot;
    name.placeholder = &quot;Item&quot;
    name.value = value

    let completed = document.createElement(&quot;input&quot;)
    completed.type = &quot;checkbox&quot;

    let remove = document.createElement(&quot;span&quot;)
    remove.innerText = &quot;‚úò&quot;
    remove.classList.add(&quot;remove&quot;)
    remove.setAttribute(&quot;tabindex&quot;, &quot;0&quot;)

    item.appendChild(name)
    item.appendChild(completed)
    item.appendChild(remove)

    todoItems.appendChild(item)

    return name
}

let newItem = addItem(&quot;Tell my friends about the great resource icelk.dev!&quot;)
newItem.focus()
</code></pre>
<h2 id="tying-it-all-together">Tying it all together</h2>
<p>The logic of the to-do list can be split into multiple funcitons (as in I have a funciton, not JS functions).</p>
<ol>
<li>When the user starts typing a new item (in the <code>new-item-name</code> input), make a new item and refocus the user input to the new item‚Äôs input field.</li>
<li>Make the remove buttons work.</li>
<li>Move item when it‚Äôs checked or unchecked.</li>
<li>Disable editing of items in the <code>done-items</code> container.</li>
<li>Most importantly; add some sweet visuals!</li>
</ol>
<p>Things we will not do in this tutorial:</p>
<ol>
<li>Drag and drop to change order</li>
<li>Sub-items</li>
</ol>
<hr />
<p>To add a new item when the user starts writing in the input, we‚Äôll have to listen for the <code>input</code> event.</p>
<p>Add this outside the function, in the same identation level (spaces left of the code).</p>
<blockquote>
<p>Here we use the <code>() =&gt; { code... }</code> syntax instead of <code>function () { code... }</code>.
It‚Äôs essentially the same, but the first is cleaner.
You can add arguments in the parentheses <code>()</code> in both.</p>
</blockquote>
<pre><code class="language-js">// Listen on the `input` event (which is called every time the user entered something)
newItemName.addEventListener(&quot;input&quot;, () =&gt; {
    // Add a new item with the name of the input field that changed
    let newItem = addItem(newItemName.value)
    // Set the `newItemName` value to be nothing. We &quot;moved&quot; the text to another input.
    newItemName.value = &quot;&quot;
    // Focus the new input; the user will get moved of the `newItemName` immediately.
    newItem.focus()
})
</code></pre>
<hr />
<p>To make the remove button work, lets add this after the <code>let remove = document.createElement(&quot;span&quot;)</code>.</p>
<pre><code class="language-js">remove.addEventListener(&quot;click&quot;, () =&gt; {
    item.remove()
})
</code></pre>
<p>We‚Äôll also add some style to make the cursor (mouse pointer on the screen) signal the <code>&lt;span&gt;</code> is clickable.</p>
<p>Add a <code>&lt;style&gt;</code> tag at the end of the head. This should be inside the style tag.</p>
<pre><code class="language-css">.remove {
    cursor: pointer;
}
</code></pre>
<p>This sets the cursor type of all elements with the class <code>remove</code> (which we added when we created the remove element).</p>
<hr />
<p>Next, we‚Äôll move the item element from the <code>to-do-items</code> container to the <code>done-items</code> container.</p>
<p>Add this after the <code>completed</code> element creation. The order doesn‚Äôt really matter,
but it looks better when we change things on one element close to other changes.</p>
<pre><code class="language-js">completed.addEventListener(&quot;change&quot;, () =&gt; {
    // This `.checked` property only exists on checkbox input types.
    let done = completed.checked

    // Reomve the item element from it's parent element.
    item.parentElement.removeChild(item)

    // If the item is done (the checkbox is checked), we
    if (done) {
        // Add it to the doneItems contaner
        doneItems.appendChild(item)
    } else {
        // Else, add it to the todoItems container.
        todoItems.appendChild(item)
    }
})
</code></pre>
<hr />
<p>Now, let‚Äôs remove the ability to remove or change the item once it‚Äôs done.</p>
<p>Add the following code to the end of the last event listener we added.</p>
<pre><code class="language-js">name.disabled = done
remove.classList.toggle(&quot;disabled&quot;)
</code></pre>
<p>This disables the input (<code>name.disabled</code>) and adds the class <code>disabled</code> to the remove element.</p>
<p>We‚Äôll need to check if the remove class is present on the <code>remove</code> element before we remove it; else, it‚Äôll always be removed.</p>
<p>Replace the event listener of the <code>remove</code> element with this. Note that we only added a <code>if</code> surrounding the removal.</p>
<pre><code class="language-js">if (!remove.classList.contains(&quot;disabled&quot;)) {
    item.remove()
}
</code></pre>
<p>To signal to the user that the disabled remove button is disabled, and not just ignore the input, let‚Äôs add this CSS in the <code>&lt;style&gt;</code> tag you added before.</p>
<blockquote>
<p>Make sure to add it as a new rule (the blocks with the thing to act on and the style to apply).</p>
</blockquote>
<pre><code class="language-css">.remove.disabled {
    /* Makes the remove button less opaque */
    opacity: 0.5;
    /* Makes the cursor be a &quot;not-allowed&quot; style */
    cursor: not-allowed;
}
</code></pre>
<hr />
<p>Next, let‚Äôs add some nice visuals. Here, the explanations are entirely in the code, as comments. This is how you would do it in real life.</p>
<p>We‚Äôve added the attribute
(key-value pairs inside the starting tag, after the tag name; <code>&lt;tagName attribute=&quot;value&quot;&gt;</code>)
<code>id</code> to some elements. An id identifies an element (shocking‚Ä¶ i know.)
Ids can be used in three main ways.</p>
<ul>
<li>First is to get a reference to the element, as we‚Äôve done several times in JS.</li>
<li>The second thing we can do is to apply styles to a specific object.
This should only be used when you only need to target one element, ever, with the styles.
You can target this by using this syntax: <code>#id { styles... }</code>.</li>
<li>Third, you can make the browser go down to where they are located on the page.
Let‚Äôs say we have heading with id <code>resources</code> on <code>https://icelk.dev/</code>.
If we want to share that part of the site, we can give our friends the link <code>https://icelk.dev/#resources</code>;
a hash <code>#</code> followed by the id added to the URL.</li>
</ul>
<p>This code should be copy and pasted to the end of the style tag.</p>
<pre><code class="language-css">.item {
    /* Increase the size of the item. Font-size is the general size of a element; if the text increases in size, everything else does. */
    /* An em is 100% of the current font size, so 1.3em = 130%. A rem is the root em, the size of the default font size.
        It's good to specify margins and paddings with rem if you don't want spacing to increase with font size. */
    font-size: 1.3em;
    /* Padding is space between the content inside the item and the border where the background color ends. */
    padding: 0.2rem;
    /* This is the space between the borders of the items */
    margin: 0 0.5rem;

    /* This fixes a lot of issues. This and the next line centers the elements in the item vertically */
    display: flex;
    align-items: center;
}
/* We can use the &gt; to specify children. See this web page for more details about the so called selectors. */
/* https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors */
.item &gt; input[type=&quot;text&quot;] {
    /* Sets inputs of type text to try to occupy 100% width. */
    /* This doesn't take the whole screen because of the #list rule below. */
    /* It also doesn't take the whole width of the item because of the `display: flex;` above. It's useful! */
    width: 100%;
}
.item &gt; input[type=&quot;checkbox&quot;] {
    /* The checkbox doesn't like the `font-size` (it doesn't change anything), so we'll set the height and width manually. */
    /* It's 1.5 and not 1.3 because of the padding of the text input, which doesn't apply here. I know, confusing. It's easiest to just play around. */
    height: 1.5em;
    width: 1.5em;
    /* This disabes automatically shrinking due to the parent (.item) being of type flex. */
    flex-shrink: 0;
}
.item &gt; input {
    /* Make sure the font-size is inherited from the parent .item element. This is needed as browsers force a font size on input elements. We revert that here. */
    font-size: inherit;
    padding: 0.1rem;
}
.item &gt; .remove {
    /* Makes the font size of the remove button 120% of it's parent. Now, it's 1.3 * 1.2 size, because the parent (.item) has a 1.3em font size. */
    font-size: 1.2em;
}
.item &gt; * {
    /* Add a margin to all .item's children */
    margin: 0 0.2rem;
}

body {
    /* Center the lists on the body with flex and justify-content */
    /* Experiment with justify-content and align-items to see which works. I don't know, so trying my way forward is helpful. */
    /* You can also search on `css flex justify-content` and click on the `developer.mozilla.org` search result. There you can find all the info. */
    display: flex;
    /* We want it to be a column of items. */
    flex-direction: column;
    align-items: center;

    /* Set the colours */
    background-color: black;
    color: white;
}
/* This specifies the element with id `list` */
#list {
    /* Make the list's width whatever is the maximum of 100% and 10rem */
    width: max(10rem, 50%);
    /* Add some padding */
    padding: 0.75rem;
}
</code></pre>
<p>My whole document now looks like this. Yours doesn‚Äôt need to exactly match, this is only here as a guide to compare to if something went wrong.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
        &lt;title&gt;To-do list&lt;/title&gt;
        &lt;style&gt;
            .remove {
                cursor: pointer;
            }
            .remove.disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .item {
                font-size: 1.3em;
                padding: 0.2rem;
                margin: 0 0.5rem;

                display: flex;
                align-items: center;
            }
            .item &gt; input[type=&quot;text&quot;] {
                width: 100%;
            }
            .item &gt; input[type=&quot;checkbox&quot;] {
                height: 1.5em;
                width: 1.5em;
                flex-shrink: 0;
            }
            .item &gt; input {
                font-size: inherit;
                padding: 0.1rem;
            }
            .item &gt; span {
                font-size: 1.2em;
            }
            .item &gt; * {
                margin: 0 0.2rem;
            }

            body {
                display: flex;
                flex-direction: column;
                align-items: center;
                background-color: black;
                color: white;
            }
            #list {
                width: max(10rem, 50%);
                padding: 0.75rem;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;list&quot;&gt;
            &lt;div id=&quot;to-do-items&quot;&gt;
                &lt;!-- Items --&gt;
            &lt;/div&gt;
            &lt;div id=&quot;new-item&quot; class=&quot;item&quot;&gt;
                &lt;input type=&quot;text&quot; id=&quot;new-item-name&quot; placeholder=&quot;Add new item...&quot; /&gt;
            &lt;/div&gt;
            &lt;hr /&gt;
            &lt;div id=&quot;done-items&quot;&gt;
                &lt;!-- Items which are checked --&gt;
            &lt;/div&gt;

            &lt;script&gt;
                let todoItems = document.getElementById(&quot;to-do-items&quot;)
                let newItemName = document.getElementById(&quot;new-item-name&quot;)
                let doneItems = document.getElementById(&quot;done-items&quot;)

                newItemName.addEventListener(&quot;input&quot;, () =&gt; {
                    let newItem = addItem(newItemName.value)
                    newItemName.value = &quot;&quot;
                    newItem.focus()
                })

                function addItem(value) {
                    let item = document.createElement(&quot;div&quot;)
                    item.classList.add(&quot;item&quot;)

                    let name = document.createElement(&quot;input&quot;)
                    name.type = &quot;text&quot;
                    name.placeholder = &quot;Item&quot;
                    name.value = value

                    let completed = document.createElement(&quot;input&quot;)
                    completed.type = &quot;checkbox&quot;

                    completed.addEventListener(&quot;change&quot;, () =&gt; {
                        // This `.checked` property only exists on checkbox input types.
                        let done = completed.checked

                        item.parentElement.removeChild(item)

                        if (done) {
                            doneItems.appendChild(item)
                        } else {
                            todoItems.appendChild(item)
                        }

                        name.disabled = done
                        remove.classList.toggle(&quot;disabled&quot;)
                    })

                    let remove = document.createElement(&quot;span&quot;)
                    remove.innerText = &quot;‚úò&quot;
                    remove.classList.add(&quot;remove&quot;)
                    remove.setAttribute(&quot;tabindex&quot;, &quot;0&quot;)

                    remove.addEventListener(&quot;click&quot;, () =&gt; {
                        if (!remove.classList.contains(&quot;disabled&quot;)) {
                            item.remove()
                        }
                    })

                    item.appendChild(name)
                    item.appendChild(completed)
                    item.appendChild(remove)

                    todoItems.appendChild(item)

                    return name
                }
            &lt;/script&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>It should now work. Congratulations!</p>
<h1 id="iterative-improvement-st-i-reloaded-lets-save-our-lists">Iterative improvement: S#¬°t, I reloaded. Let‚Äôs save our lists!</h1>
<p>If you reload, the list isn‚Äôt saved!</p>
<p>Let‚Äôs fix this by saving the list locally (on the users computer).
You‚Äôve maybe heard of cookies (specially if you live in the EU with GDPR‚Ä¶)
which is a way for the web server to store info on the client.
We want to store data on the client from JS. Here, <code>localStorage</code> is a great choice.</p>
<p>The <code>localStorage</code> API (application programmable interface, what we‚Äôve called built-ins, but API can be code from others too)
consists of getting and settings names to values where both are strings.</p>
<p>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage#example">this MDN page about the feature</a>.</p>
<p>Now we know how to save the data, but how do we get it?</p>
<h2 id="getting-the-data">Getting the data</h2>
<p>We have all the items in a container, so we can iterate (for each ‚Ä¶ do ‚Ä¶) over the children of the container and extract the values.</p>
<p>An alternative is to make a list of all items and add a reference to the input to the list when we create a new item.
This is faster (as in fractions of milliseconds faster) but more error-prone; if the item is deleted without being removed from the list,
we‚Äôll try to get data from a non-existent input. Also, removing items from lists take some time
(but this is naturally done when we moved the item, but by the browser).</p>
<p>Today, we‚Äôll go with the first option.</p>
<p>Make a function called <code>saveList</code> with no arguments, at the end of the script tag. It should look like the following.</p>
<pre><code class="language-js">function saveList() {
    let todoChildren = todoItems.children
    let doneChildren = doneItems.children

    // Here, we create a object called data with two properties, a list named todo and another list named done.
    let data = {
        todo: [],
        done: [],
    }

    // A function within a function to add all values of the inputs of `children` to the `list`
    function addNameToList(list, children) {
        // This is a loop. Type `for` and press tab to make the loop appear.
        // Here, we can't use `children.forEach` because of some weird JS standards.

        // let i = 0 declares i to be 0
        // the loop will continue as long as `i &lt; children.length`
        // (this can be tricky if you remove items from the children list in the loop, then the child count is lowered.)
        // `i++` increases i by one at the end of each iteration (each time the code inside is ran).
        for (let i = 0; i &lt; children.length; i++) {
            // Get a refernce to the child.
            // `children` is a array-like object, which means we can access the item at position i with this syntax.
            let child = children[i]

            // Gets the first child, which is the input
            let input = child.firstElementChild

            let name = input.value

            // `array.push` adds to the end of the list
            list.push(name)
        }
    }

    addNameToList(data.todo, todoChildren)
    addNameToList(data.done, doneChildren)

    // The `data` object now contains all the names.
    // To store it as a string, we're going to have to serialize it.
    // This can easily be achieved by using `JSON.stringify()`

    let string = JSON.stringify(data)

    localStorage.setItem(&quot;savedList&quot;, string)

    // Add the contents of `string` after `Saved `. Note the space, we have to specify it manually.
    alert(&quot;Saved &quot; + string)

    return data
}
</code></pre>
<p>If you run this (by calling the function after the function), you should see a pop-up containing the data saved.</p>
<p>Remove the <code>alert</code> line (and it‚Äôs comment, if you copy-pasted).</p>
<h2 id="reading-the-saved-items">Reading the saved items</h2>
<p>For the saved data to have any meaning, we‚Äôre going to read it and add items.</p>
<p><strong>See if you can do this with the <code>todo</code> items.</strong>
To get a JS object from the text we saved, use <code>JSON.parse</code>.</p>
<blockquote>
<p>If you want to try this with the <code>done</code> items too, remember how we moved the items when pressing the <code>completed</code> checkbox.
The same code should be useful here.</p>
</blockquote>
<blockquote>
<p>For further help with this, consider adding the done items with the <code>addItem</code> funciton, then moving each
(make sure to move the parent of the returned element; the function returns a reference to the input, we want to remove the item container).</p>
</blockquote>
<p>Let‚Äôs view my solution.</p>
<pre><code class="language-js">function loadList() {
    let data = JSON.parse(localStorage.getItem(&quot;savedList&quot;))

    data.todo.forEach((todoItem) =&gt; {
        addItem(todoItem)
    })

    data.done.forEach((doneItem) =&gt; {
        let input = addItem(doneItem)
        let itemContainer = input.parentElement

        // This moves the item from the `todoItems` container to `doneItems`.
        itemContainer.parentElement.removeChild(itemContainer)
        doneItems.appendChild(itemContainer)

        // This disabled input
        input.disabled = true
        // When we get a item from a array, the first item has the position `0`.
        // Therefore, the checkbox, which is the second item, has a index of 1.
        // This makes the checkbox checked.
        itemContainer.children[1].checked = true
        // Here, we are accessing the third item, with a index of `2`
        // This disabled the remove button
        itemContainer.children[2].classList.add(&quot;disabled&quot;)
    })
}

loadList()
</code></pre>
<p>Note the <code>loadList()</code> call at the end. This loads the list when the document is loaded.</p>
<p>To save the list every time we change something, let‚Äôs add this code to the item creation function.</p>
<pre><code class="language-js">// After the creation of `name`
name.addEventListener(&quot;input&quot;, () =&gt; {
    saveList()
})

// After the event listener attached to (listening to events from) `completed`
completed.addEventListener(&quot;change&quot;, () =&gt; {
    saveList()
})

// After the event listener attached to `remove`
// Note the event here is `click`, not `change` since this isn't a input, just a element.
remove.addEventListener(&quot;click&quot;, () =&gt; {
    saveList()
})
</code></pre>
<p>And just like that, your todo-list should not be saved. Try writing something and reload. Everything should be there!</p>
<hr />
<p>This is how my <code>&lt;script&gt;</code> tag looks now, here for your reference if something goes wrong.</p>
<pre><code class="language-html">&lt;script&gt;
    let todoItems = document.getElementById(&quot;to-do-items&quot;)
    let newItemName = document.getElementById(&quot;new-item-name&quot;)
    let doneItems = document.getElementById(&quot;done-items&quot;)

    newItemName.addEventListener(&quot;input&quot;, () =&gt; {
        let newItem = addItem(newItemName.value)
        newItemName.value = &quot;&quot;
        newItem.focus()
    })

    function addItem(value) {
        let item = document.createElement(&quot;div&quot;)
        item.classList.add(&quot;item&quot;)

        let name = document.createElement(&quot;input&quot;)
        name.type = &quot;text&quot;
        name.placeholder = &quot;Item&quot;
        name.value = value
        name.addEventListener(&quot;input&quot;, () =&gt; {
            saveList()
        })

        let completed = document.createElement(&quot;input&quot;)
        completed.type = &quot;checkbox&quot;

        completed.addEventListener(&quot;change&quot;, () =&gt; {
            let done = completed.checked

            item.parentElement.removeChild(item)

            if (done) {
                doneItems.appendChild(item)
            } else {
                todoItems.appendChild(item)
            }

            name.disabled = done
            remove.classList.toggle(&quot;disabled&quot;)
        })
        completed.addEventListener(&quot;change&quot;, () =&gt; {
            saveList()
        })

        let remove = document.createElement(&quot;span&quot;)
        remove.innerText = &quot;‚úò&quot;
        remove.classList.add(&quot;remove&quot;)
        remove.setAttribute(&quot;tabindex&quot;, &quot;0&quot;)

        remove.addEventListener(&quot;click&quot;, () =&gt; {
            if (!remove.classList.contains(&quot;disabled&quot;)) {
                item.remove()
            }
        })
        remove.addEventListener(&quot;click&quot;, () =&gt; {
            saveList()
        })

        item.appendChild(name)
        item.appendChild(completed)
        item.appendChild(remove)

        todoItems.appendChild(item)

        return name
    }

    function saveList() {
        let todoChildren = todoItems.children
        let doneChildren = doneItems.children

        // Here, we create a object called data with two properties, a list named todo and another list named done.
        let data = {
            todo: [],
            done: [],
        }

        // A function within a function to add all values of the inputs of `children` to the `list`
        function addNameToList(list, children) {
            // This is a loop. Type `for` and press tab to make the loop appear.
            // Here, we can't use `children.forEach` because of some weird JS standards.

            // let i = 0 declares i to be 0
            // the loop will continue as long as `i &lt; children.length`
            // (this can be tricky if you remove items from the children list in the loop, then the child count is lowered.)
            // `i++` increases i by one at the end of each iteration (each time the code inside is ran).
            for (let i = 0; i &lt; children.length; i++) {
                // Get a refernce to the child.
                // `children` is a array-like object, which means we can access the item at position i with this syntax.
                let child = children[i]

                // Gets the first child, which is the input
                let input = child.firstElementChild

                let name = input.value

                // `array.push` adds to the end of the list
                list.push(name)
            }
        }

        addNameToList(data.todo, todoChildren)
        addNameToList(data.done, doneChildren)

        // The `data` object now contains all the names.
        // To store it as a string, we're going to have to serialize it.
        // This can easily be achieved by using `JSON.stringify()`

        let string = JSON.stringify(data)

        localStorage.setItem(&quot;savedList&quot;, string)

        return data
    }

    function loadList() {
        let data = JSON.parse(localStorage.getItem(&quot;savedList&quot;))

        data.todo.forEach((todoItem) =&gt; {
            addItem(todoItem)
        })

        data.done.forEach((doneItem) =&gt; {
            let input = addItem(doneItem)
            let itemContainer = input.parentElement

            // This moves the item from the `todoItems` container to `doneItems`.
            itemContainer.parentElement.removeChild(itemContainer)
            doneItems.appendChild(itemContainer)

            // This disabled input
            input.disabled = true
            // When we get a item from a array, the first item has the position `0`.
            // Therefore, the checkbox, which is the second item, has a index of 1.
            // This makes the checkbox checked.
            itemContainer.children[1].checked = true
            // Here, we are accessing the third item, with a index of `2`
            // This disabled the remove button
            itemContainer.children[2].classList.add(&quot;disabled&quot;)
        })
    }

    loadList()
&lt;/script&gt;
</code></pre>
<h1 id="iterative-improvement-saving-our-list-on-a-server">Iterative improvement: Saving our list on a server</h1>
<p>Let‚Äôs say we want to use this list from several devices. It requires syncing to a server and fetching the data.</p>
<p><strong><em>Let‚Äôs implement it!</em></strong></p>
<hr />
<p>We need to change three things.</p>
<ol>
<li>On load, the client needs to fetch data from the server.</li>
<li>On save, the client needs to send data to the server.</li>
<li>We should limit the calls to <code>saveList</code> to one per second so the server doesn‚Äôt get flooded.</li>
</ol>
<blockquote>
<p>This is really hard to do with the <code>code-online</code> setup.
Read the <a href="#project-i-dont-trust-this-serverowner-imma-build-my-own">third project</a> before this in that case.</p>
</blockquote>
<h2 id="prelude-">Prelude (download Rust!)</h2>
<p>I‚Äôve built a server which responds to our requests and saves our data.</p>
<p>You need to download the language <code>Rust</code> which I‚Äôve built the server in.
Follow the instructions on <a href="https://www.rust-lang.org/learn/get-started">their official site</a> to install.</p>
<p>Next, open the terminal (drag up from the top of the bottom bar) and type this. Hit enter to run the program.</p>
<pre><code class="language-shell">$ git clone https://github.com/Icelk/beginner-programming-server server
</code></pre>
<p>This clones (makes a local copy of) <a href="https://github.com/Icelk/beginner-programming-server">this project</a>
to the folder <code>server</code> (after the last space).</p>
<p>Now <code>cd</code> into the directory (<code>cd server</code>). Now, start the server by typing <code>cargo run</code>.</p>
<blockquote>
<p>If this doesn‚Äôt run, try to execute <code>rustup default stable</code>.</p>
</blockquote>
<p>Now, you can drag the terminal down again. It‚Äôll still be there, running, so you can drag it up any time.</p>
<h2 id="the-fetch-api">The Fetch API</h2>
<p>Now, let‚Äôs go back to the JS side of things.</p>
<p>But first, let‚Äôs learn the API.</p>
<p>If we make a <code>GET</code> request to the URL (the thing in the address bar of your browser) <code>/list?id=&lt;your id&gt;</code> we get the list data of <code>&lt;your id&gt;</code>.
If our site is at <code>https://example.org</code> and our id is <code>icelk</code>, the request should be <code>https://example.org/list?id=icelk</code>.
Since we started the request with <code>/</code> we can omit <code>https://example.org</code>; it‚Äôs relative to the current website.
The <code>?id=</code> part is the <em>query</em>. A query can add parameter to a page. We still request the page <code>/list</code>, but add some more basic data.
The question mark <code>?</code> specifies the beginning of the query, which is key-value pairs (<code>key=value</code>) separated by commas <code>,</code>.</p>
<p>To save the data, we make a <code>PUT</code> request to the same URL. Since the server only saves the raw data, we don‚Äôt need to send
the data in any special format; the server only sends back the data we saved.</p>
<p>You probably don‚Äôt know what <code>GET</code> and <code>PUT</code> means.
<code>GET</code> is a type of request which gets data. Going to a website makes the browser execute a <code>GET</code> request.
<code>PUT</code> is for putting data to the URL requested. The data is sent as the <em>body</em>. A <code>GET</code> response from the server contains the website in it‚Äôs body,
but a <code>PUT</code> request contains the data sent in the request body.</p>
<p>To make requests we need to load our document from the same web server as the API is located at, for security concerns.
Make a folder (in the folder view in the left in VS Code) names <code>public</code> in <code>server</code>. Move your document there, and rename it to <code>index.html</code>.</p>
<p>Now, go to <code>http://localhost:8080/</code>. You should see the same web page as before
(if it says the page can‚Äôt be reached, make sure the web server is running in a terminal).</p>
<blockquote>
<p><code>localhost</code> is the domain, such as <code>icelk.dev</code>. <code>localhost</code> is the computer you‚Äôre using. <code>:8080</code> defines the port.</p>
</blockquote>
<p>Now, let‚Äôs make a function which loads our list from the server.</p>
<blockquote>
<p>Here we use asynchronous code (not running from beginning to end, but in parallel);
&lt; the response from the server takes some time to get back,
during which time we want our page to be responsive.
Calling a <code>async function</code> immediately returns a <code>Promise</code>, which can
be <em>awaited</em> (waited for to finish) by writing <code>await</code> before it.
Note that you can only <code>await</code> a <code>Promise</code> in a <code>async</code> function.</p>
</blockquote>
<pre><code class="language-js">async function loadListFromServer(id) {
    let response = await fetch(&quot;/list?id=&quot; + id)

    if (!response.ok) {
        alert(&quot;id contains invalid characters, can't fetch list&quot;)
    }

    let string = await response.text()
    let data = JSON.parse(string)

    clearChildren(todoItems)
    clearChildren(doneItems)
    loadList(data)
}
</code></pre>
<p>If you read the code (and didn‚Äôt just copy and paste, never copy code you don‚Äôt understand),
you maybe noticed we called a function called <code>clearChildren</code>, which we havent written.
Neither is it part of the built-ins, so let‚Äôs define it.</p>
<pre><code class="language-js">function clearChildren(element) {
    while (element.firstChild) {
        element.removeChild(element.lastChild)
    }
}
</code></pre>
<p>Next, change the call to <code>loadList</code> at the end of the script, which is ran at load, to <code>loadListFromServer</code>.</p>
<p>We also need to change the <code>loadList</code> function to take the data object instead of loading it from localStorage.
Remove the first line (<code>let data = JSON.parse(localStorage.getItem(&quot;savedList&quot;))</code>) and add a <code>data</code> argument to the function.</p>
<p>But what id do we use? In order to save several lists on the same server (for different users), we naturally need ids.
Check the next heading for how to do this.</p>
<h2 id="putting-it-in-the-right-place"><strong>Put</strong>ting it in the right place</h2>
<p>Next, we need to save our list.</p>
<p>We‚Äôll do three things:</p>
<ol>
<li>Add a ID input field in the document.</li>
<li>Save the id locally.</li>
<li>Send the data to the server.</li>
</ol>
<p>First, let‚Äôs add a input to get the ID from.</p>
<p>I‚Äôve added this before the <code>item</code> container, but as long as it‚Äôs a text input with the id <code>idInput</code>, my code should work for you.</p>
<pre><code class="language-html">&lt;body&gt;
    &lt;!-- This part is new. And this is a comment in HTML. --&gt;
    &lt;input id=&quot;idInput&quot; type=&quot;text&quot; placeholder=&quot;ID&quot; /&gt;
    &lt;div id=&quot;list&quot;&gt;...&lt;/div&gt;
&lt;/body&gt;
</code></pre>
<p>Let‚Äôs add a reference to this item in JS, after the other references.</p>
<pre><code class="language-js">let idInput = document.getElementById(&quot;idInput&quot;)
</code></pre>
<p>And then add some event listeners when the value changes (not on each input) using the (appropriately named) <code>change</code> event.</p>
<pre><code class="language-js">idInput.addEventListener(&quot;change&quot;, () =&gt; {
    let id = idInput.value
    localStorage.setItem(&quot;id&quot;, id)
    loadListFromServer(id)
})
</code></pre>
<p>This changes the <code>localStorage</code> entry for <code>id</code> too, so the user doesn‚Äôt need to retype it every time.</p>
<p>Next, let‚Äôs load the id and request the data from the server on load.
This code should be in the global scope, where we‚Äôve previously defined all our functions.
Else, it won‚Äôt be ran.</p>
<pre><code class="language-js">let savedId = localStorage.getItem(&quot;id&quot;)

// A check to see if the value exists (if it's null, there is no id saved) and isn't empty
if (savedId != null &amp;&amp; savedId != &quot;&quot;) {
    loadListFromServer(savedId)
    // Set the idInput value to the loaded id
    idInput.value = savedId
}
</code></pre>
<hr />
<p>Now, to push data to the server we need to limit the request count.
The easiest (but by far not best) way to do this is to have a interval of 1 second.
We can use a true / false value to track if any change happened since the last request to the server.</p>
<p>Add a variable named <code>changedSinceLastRequest</code> set to <code>false</code> (without <code>&quot;&quot;</code>; it‚Äôs not test) after the reference variables.
Next, change all the calls (there should be 3 in total) from <code>saveList</code> to <code>saveListToServer</code>.
Now, declare a function named <code>saveListToServer</code> which sets <code>changedSinceLastRequest</code> to <code>true</code>.
Then, add this after the declaration of the <code>changedSinceLastRequest</code> variable:</p>
<pre><code class="language-js">setInterval(() =&gt; {
    if (changedSinceLastRequest) {
        let data = saveList()

        fetch(&quot;/list?id=&quot; + id, {
            method: &quot;PUT&quot;,
            body: JSON.stringify(data),
        })

        // Reset value
        changedSinceLastRequest = false
    }
}, 1000)
</code></pre>
<p>Your list should now save and load with the ID you enter!
You can check the <code>data</code> folder where your server is running for all the saved data!</p>
<p>You should now have a <code>id</code> input field and the code we wrote in this chapter should look something like this.</p>
<pre><code class="language-js">// --snip--

let idInput = document.getElementById(&quot;idInput&quot;)
let changedSinceLastRequest = false
let serverResponded = true

setInterval(async () =&gt; {
    if (!serverResponded) {
        return
    }
    if (changedSinceLastRequest) {
        let data = saveList()
        // Reset value
        changedSinceLastRequest = false

        serverResponded = false

        let id = idInput.value

        let response = await fetch(&quot;/list?id=&quot; + id, {
            method: &quot;PUT&quot;,
            body: JSON.stringify(data),
        })

        if (!response.ok) {
            alert(&quot;name contains invalid characters&quot;)
        }

        serverResponded = true
    }
}, 250)

idInput.addEventListener(&quot;change&quot;, () =&gt; {
    let id = idInput.value
    localStorage.setItem(&quot;id&quot;, id)
    loadListFromServer(id)
})

// --snip--

function addItem(value) {
    let item = document.createElement(&quot;div&quot;)
    item.classList.add(&quot;item&quot;)

    let name = document.createElement(&quot;input&quot;)
    name.type = &quot;text&quot;
    name.placeholder = &quot;Item&quot;
    name.value = value
    name.addEventListener(&quot;change&quot;, () =&gt; {
        saveListToServer()
    })

    let completed = document.createElement(&quot;input&quot;)
    completed.type = &quot;checkbox&quot;

    completed.addEventListener(&quot;change&quot;, () =&gt; {
        let done = completed.checked

        item.parentElement.removeChild(item)

        if (done) {
            doneItems.appendChild(item)
        } else {
            todoItems.appendChild(item)
        }

        name.disabled = done
        remove.classList.toggle(&quot;disabled&quot;)
    })
    completed.addEventListener(&quot;change&quot;, () =&gt; {
        saveListToServer()
    })

    let remove = document.createElement(&quot;span&quot;)
    remove.innerText = &quot;‚úò&quot;
    remove.classList.add(&quot;remove&quot;)
    remove.setAttribute(&quot;tabindex&quot;, &quot;0&quot;)

    remove.addEventListener(&quot;click&quot;, () =&gt; {
        if (!remove.classList.contains(&quot;disabled&quot;)) {
            item.remove()
        }
    })
    remove.addEventListener(&quot;click&quot;, () =&gt; {
        saveListToServer()
    })

    item.appendChild(name)
    item.appendChild(completed)
    item.appendChild(remove)

    todoItems.appendChild(item)

    return name
}

// --snip--

function saveListToServer() {
    changedSinceLastRequest = true
}

function clearChildren(element) {
    while (element.firstChild) {
        element.removeChild(element.lastChild)
    }
}

function loadList(data) {
    if (data.todo != undefined) {
        data.todo.forEach((todoItem) =&gt; {
            addItem(todoItem)
        })
    }
    // --snip--
}

// --snip--

async function loadListFromServer(id) {
    let response = await fetch(&quot;/list?id=&quot; + id)

    if (!response.ok) {
        alert(&quot;id contains invalid characters, can't fetch list&quot;)
    }

    let string = await response.text()
    let data = JSON.parse(string)

    clearChildren(todoItems)
    clearChildren(doneItems)
    loadList(data)
}

let savedId = localStorage.getItem(&quot;id&quot;)

if (savedId != null) {
    loadListFromServer(savedId)
    idInput.value = savedId
}
</code></pre>
<h1 id="project-i-dont-trust-this-serverowner-imma-build-my-own">Project: I don‚Äôt trust this server-owner. Imma build my own!</h1>
<p>The last thing to make this application fully yourself is to build the server that serves the website and
provides a API for saving the data.</p>
<blockquote>
<p>The code you download (<code>git clone</code>d) before is what we are going to build.</p>
</blockquote>
<p>Let‚Äôs make a new folder named <code>our-server</code> in the same level as the <code>server</code> folder that‚Äôs currently running the website.
Enter it by navigating with the <code>cd</code> command in the terminal. <code>cd ..</code> goes up one level and
<code>cd our-server</code> goes into the folder named <code>our-server</code>.</p>
<h2 id="rust-is-stricter">Rust is stricter</h2>
<p>We are going to write the server in <a href="https://rust-lang.org">Rust</a>, a modern, safe, and
<em>very</em> fast programming language, especially compared to JS.</p>
<p>As you saw in <a href="#example-saying-hello-in-multiple-languages">the second example</a>, we sometimes need to tell
Rust which types we want to accept in functions. The syntax is also stricter.</p>
<blockquote>
<p>Many programmers prefer this strictness, as it catches silly bugs (errors) before
we deploy our code to production.</p>
</blockquote>
<p>Critically, JS is <em>the</em> programming language of the web, while Rust only works as apps you
run on your computer. Rust can be ran on the web through <a href="https://webassembly.org/">WebAssembly</a>,
though it is relatively complicated. It is however considerably speedier.</p>
<h2 id="using-kvarn">Using Kvarn</h2>
<p><a href="https://kvarn.org">Kvarn</a> is a great web framework for Rust that we are going to use.
It handles all the underlying security, speed, handling of messages and lots of other things for us.</p>
<p>Assuming your terminal is in the newly created folder <code>our-server</code>,
run <code>cargo init</code> to initiate a new Rust project.</p>
<blockquote>
<p><a href="https://doc.rust-lang.org/book/ch01-03-hello-cargo.html">Cargo</a>
is a Rust tool that, <a href="https://doc.rust-lang.org/cargo/reference/">among other things</a>,
manages dependencies (other‚Äôs code you use).</p>
</blockquote>
<p>Let‚Äôs edit the <code>src/main.rs</code> (a file named <code>main.rs</code> in a directory called <code>src</code>) file. This file is where our program starts.
Enter this to get a web server running on port 8080. Make sure to stop the previous server (<code>Ctrl+C</code>).</p>
<pre><code class="language-rust">// Imports (makes them available to *use*) the Kvarn types we'll use.
use kvarn::prelude::*;

// Enables the main function to be async
#[tokio::main]
async fn main() {
    // Create a host with hostname &quot;localhost&quot;, serving files from directory &quot;./web/public/&quot;, with the default extensions and the default options.
    // Unsecure here means we're not using HTTPS - the protocol used to secure and speed up connections over the internet.
    let host = Host::unsecure(&quot;localhost&quot;, &quot;web&quot;, Extensions::default(), host::Options::default());
    // Create a set of virtual hosts (`Data`) with `host`.
    let data = Data::builder().insert(host).build();
    // Bind port 8080 with `data`.
    let port_descriptor = PortDescriptor::unsecure(8080, data);

    // Run with the configured ports.
    let shutdown_manager = RunConfig::new()
        .bind(port_descriptor)
        .execute()
        .await;

    // Waits for shutdown. This will currently never happen, so the server is ran forever.
    shutdown_manager.wait().await;
}
</code></pre>
<p>As you see, we await on <code>Promise</code>s (called <code>Future</code>s in Rust, but they are essentially the same)
by writing <code>.await</code> after a async function, not by writing <code>await</code> before it.</p>
<p>But we have a problem! If you try to run the program by executing <code>cargo run</code> in the terminal, it will err.
Kvarn and Tokio aren‚Äôt found!</p>
<p>To fix this, let‚Äôs add Kvarn to our project. Add this to the bottom of <code>Cargo.toml</code>, in the <code>[dependencies]</code> section.</p>
<pre><code class="language-ini">kvarn = { version = &quot;0.3&quot;, features = [&quot;full&quot;] }
tokio = { version = &quot;1&quot;, features = [&quot;macros&quot;] }
</code></pre>
<p><code>Cargo.toml</code> should now look like this:</p>
<pre><code class="language-ini">[package]
name = &quot;our-server&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
kvarn = { version = &quot;0.3&quot;, features = [&quot;full&quot;] }
tokio = { version = &quot;1&quot;, features = [&quot;macros&quot;] }
</code></pre>
<p>Now, if you try to run it, it‚Äôll download and compile
(translate the code you write to what computers understand)
all the required dependencies and run the server. You should be able to access
the website <code>localhost:8080</code> in your browser, after this process is finished.
It should be a <code>404 Not Found</code> error, as we‚Äôve not provided any content.</p>
<blockquote>
<p>If you want to play around with performance in Rust, remember to run with <code>cargo run --release</code>!</p>
</blockquote>
<h2 id="how-to-store-the-data">How to store the data?</h2>
<p>Now, how are we going to store the data sent by our web site?
To keep this simple, we are going to save each list in a separate file.</p>
<p>Add this at the top of the Rust file, in between the Kvarn import and our main function.</p>
<pre><code class="language-rust">const DATA_DIR: &amp;str = &quot;data&quot;;
</code></pre>
<p>This defines the path to store data in. This can be any path, but I chose the relative <code>data</code> directory.</p>
<p>Let‚Äôs create that directory every time the web server runs, so we can store files there.
In <code>src/main.rs</code>, add this at the top of the <code>main</code> function.</p>
<pre><code class="language-rust">tokio::fs::DirBuilder::new().create(DATA_DIR).await.unwrap();
</code></pre>
<p>The <code>.unwrap()</code> is to handle a error we might encounter. If you hover over the <code>crate</code> method,
you can see it returns a <code>Result</code>, meaning an error could have occurred.
This can be permission issues, among other things. Our program will not function if we cannot create the <code>data</code>
folder, so we tell Rust to exit the program in this case.</p>
<blockquote>
<p>If the hover doesn‚Äôt show anything, install the <code>rust-analyzer</code> extension in VS Code.</p>
</blockquote>
<blockquote>
<p>Hover over <code>unwrap</code> to see documentation about it.</p>
</blockquote>
<p>Creating a file is done (asynchronously) with
<a href="https://docs.rs/tokio/1.7.1/tokio/fs/struct.File.html#method.create"><code>tokio::fs::File::create(path)</code></a>.
We can then write to it by calling <code>file.write_all(bytes)</code> to write bytes to the file.
A byte is a integer (whole number) with a range from 0 to 255; 256 distinct values, including <code>0</code>.
Everything is stored as bytes in computers. As such, we get an array of bytes from Kvarn. We then store them in a file.</p>
<blockquote>
<p>Not all configurations of bytes are valid text. If you try to open a image in
a text-editing program (not VS Code), you should see weird text;
it tries to interpret the bytes of the image as text!</p>
</blockquote>
<h2 id="logging">Logging</h2>
<p>Kvarn logs many events, which can be useful if something goes wrong; you can
pin-point the problem and easily filter to see if something goes wrong.</p>
<p>Add the <code>env_logger</code> crate (dependency) with version ‚Äú^0.8‚Äù (which means ‚Äú0.8.whatever‚Äù) to <code>Cargo.toml</code>.</p>
<pre><code class="language-ini">env_logger = &quot;^0.8&quot;
</code></pre>
<p>Now, initiate the logger when the program starts at the very start of our <code>main</code> function.</p>
<pre><code class="language-rust">env_logger::init();
</code></pre>
<p>Your <code>Cargo.toml</code> should look something like this:</p>
<pre><code class="language-ini">[package]
name = &quot;our-server&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
env_logger = &quot;0.9&quot;
kvarn = { version = &quot;0.3&quot;, features = [&quot;mt&quot;] }
tokio = { version = &quot;1&quot;, features = [&quot;macros&quot;] }
</code></pre>
<p>And your <code>src/main.rs</code> like this.</p>
<pre><code class="language-rust">use kvarn::prelude::*;

const DATA_DIR: &amp;str = &quot;data&quot;;

#[tokio::main]
async fn main() {
    env_logger::init();

    tokio::fs::DirBuilder::new().recursive(true).create(DATA_DIR).await.unwrap();

    // Create a host with hostname &quot;localhost&quot;, serving files from directory &quot;./public&quot;, and the default extensions and the default options.
    let host = Host::unsecure(
        &quot;localhost&quot;,
        &quot;web&quot;,
        Extensions::new(),
        host::Options::new(),
    );
    // Create a set of virtual hosts (`Data`) with `host` as the default.
    let data = Data::builder().insert(host).build();
    // Bind port 8080 with `data`.
    let port_descriptor = PortDescriptor::unsecure(8080, data);

    // Run with the configured ports.
    let shutdown_manager = RunConfig::new()
        .bind(port_descriptor)
        .execute()
        .await;

    // Waits for shutdown.
    shutdown_manager.wait().await;
}
</code></pre>
<h2 id="receive-the-data">Receive the data</h2>
<p>Next, let‚Äôs get this working!</p>
<p>I‚Äôm giving you all the code, filled with comments, for you to explore on your own.
If you find anything unclear, please <a href="mailto:Icelk%3Cmain@icelk.dev%3E">email me</a>
so I can resolve any issues.</p>
<pre><code class="language-rust">use kvarn::prelude::*;

// This below is a documentation comment.
// They exist in Rust and provide a way for you to add documentation to your types.
// Hover over the name `DATA_DIR` below to see the comment!
/// The data directory storing the lists.
const DATA_DIR: &amp;str = &quot;data&quot;;

#[tokio::main]
async fn main() {
    // Init the logger
    env_logger::init();

    // Create the folder `DATA_DIR`
    tokio::fs::DirBuilder::new().recursive(true).create(DATA_DIR).await.unwrap();

    // Create a new set of extensions
    let mut extensions = Extensions::new();

    // Handle requests to `/list` with this code.
    // Here, we define the API which handles saving and retrieving lists.
    extensions.add_prepare_single(&quot;/list&quot;, prepare!(req, host, _path, _addr {
        // Parse (a Kvarn function) the query, the part of the URL (or URI as it's officially called) after the `?`.
        let query = parse::query(req.uri().query().unwrap_or(&quot;&quot;));
        // Get the `id` part of the query.
        let id = query.get(&quot;id&quot;);

        // If the id is present in the query, do this
        if let Some(id) = id {
            // See if any characters of the id are considered illegal by us.
            let contains_illegal_chars = id.value().chars().any(|char| !(char.is_ascii_alphanumeric() || char == '_' || char == '-'));

            if contains_illegal_chars {
                return default_error_response(StatusCode::BAD_REQUEST, host, None).await;
            }

            // See which method was requested.
            // Return the list if the method is GET
            // and save it if the method is PUT.
            match *req.method() {
                Method::GET =&gt; {
                    // Define a function to read from a file and get the bytes.
                    // This is here so we can use `?` to return if a error occurs.
                    // We then only have to handle an error once, when we call this function below.
                    async fn read_file(path: &amp;Path) -&gt; io::Result&lt;Bytes&gt; {
                        let mut file = tokio::fs::File::open(path).await?;
                        let mut buffer = BytesMut::with_capacity(4096);
                        async_bits::read_to_end(&amp;mut buffer, &amp;mut file).await?;
                        Ok(buffer.freeze())
                    }
                    // Create a new path
                    let mut path = PathBuf::new();
                    // Add DATA_DIR to it
                    path.push(DATA_DIR);
                    // Then add the id, as the filename
                    path.push(id.value());

                    // This is a log.
                    info!(&quot;Reading id¬†{}&quot;, id);

                    // Read the file
                    let body = read_file(&amp;path).await;

                    // If the operation was successful, return
                    // (the last thing with no `;` at the end)
                    // a new response,
                    // else a empty response.
                    //
                    // The from_static takes a byte input (which can be written as b&quot;bytes&quot; in Rust)
                    // and creates a Bytes object from it.
                    // The `{}` signals to the JS requesting this that the list is empty.
                    // If we didn't include the `{}`, the `JSON.parse` would fail, as it wouldn't
                    // be valid JSON, which our JS expects.
                    match body {
                        Ok(body) =&gt; {
                            let response = Response::new(body);
                            FatResponse::no_cache(response)
                        }
                        Err(_) =&gt; {
                            FatResponse::no_cache(Response::new(Bytes::from_static(b&quot;{}&quot;)))
                        }
                    }
                }
                Method::PUT =&gt; {
                    // Same here, we define a function to simplify error handling.
                    // The body is a Kvarn type of a stream we can get the bytes from.
                    async fn read_write_file(path: &amp;Path, body: &amp;mut application::Body) -&gt; io::Result&lt;()&gt; {
                        // Get the bytes from the client (the JS)
                        let content = body.read_to_bytes().await?;

                        // Don't accept lists larger than 128KB (1024 * 128 bytes) in size
                        if content.len() &gt;= 1024 * 128 {
                            return Err(io::Error::new(io::ErrorKind::InvalidData, &quot;data too long&quot;));
                        }

                        // Create the file
                        let mut file = tokio::fs::File::create(path).await?;
                        // Write all the data
                        file.write_all(&amp;content).await?;
                        Ok(())
                    }

                    let mut path = PathBuf::new();
                    path.push(DATA_DIR);
                    path.push(id.value());

                    info!(&quot;Writing id {}&quot;, id);

                    // If the read_write_file function returns a error, run this
                    if let Err(err) = read_write_file(&amp;path, req.body_mut()).await {
                        // Return different status codes and reasons depending on the error of the
                        // function.
                        let (status_code, reason) = match err.kind() {
                            io::ErrorKind::InvalidData =&gt; (StatusCode::BAD_REQUEST, Some(&quot;list too long, must be less than 128KB&quot;)),
                            _ =&gt; (StatusCode::INTERNAL_SERVER_ERROR, None)
                        };
                        default_error_response(status_code, host, reason).await
                    } else {
                        // else, return a new, empty response.
                        // `Bytes::new()` is the same as `Bytes::from_static(b&quot;&quot;)`.
                        FatResponse::no_cache(Response::new(Bytes::new()))
                    }
                }
                // In all other cases (more methods exist),
                // send a method not allowed error to the client.
                _ =&gt; {
                    default_error_response(StatusCode::METHOD_NOT_ALLOWED, host, None).await
                }
            }
        } else {
            // If a id doesn't exist, return a bad request error, telling the client it should have
            // a id in it's request query.
            default_error_response(StatusCode::BAD_REQUEST, host, Some(&quot;You need an ID in the query.&quot;)).await
        }
    }));

    // Create a host with hostname &quot;localhost&quot;, serving files from directory &quot;./public&quot;, and the default extensions.
    // This was changed from &quot;web&quot; to &quot;./&quot;, so it serves files from &quot;./public&quot;, which is the same
    // as &quot;public&quot; instead of &quot;web/public&quot;.
    let host = Host::unsecure(
        &quot;localhost&quot;,
        &quot;web&quot;,
        extensions,
        host::Options::new(),
    );
    // Create a set of virtual hosts (`Data`) with `host` as the default.
    let data = Data::builder().insert(host).build();
    // Bind port 8080 with `data`.
    let port_descriptor = PortDescriptor::unsecure(8080, data);

    // Run with the configured ports.
    let shutdown_manager = RunConfig::new()
        .bind(port_descriptor)
        .execute()
        .await;

    // Waits for shutdown.
    // This will never happen; we don't shut it down anywhere!
    shutdown_manager.wait().await;
}
</code></pre>
<p>If you now <code>cargo run</code>, the web application should work just like before, but now
you know how it‚Äôs saved and have complete control over the server!</p>
<h1 id="conclusion">Conclusion</h1>
<p>In this tutorial, you‚Äôve developed a full-stack web application.
You now know how to integrate the web with back-end technologies.</p>
<p>If you continue being interested in learning, you‚Äôll soon be a wiz
at computer science. I‚Äôve been programming for 4 years, and feel I could
start working full time with programming. <strong><em>I leaned it all by myself
through curiosity and enjoyment</em></strong>.</p>
<p><strong><em>You can very well soon land a job doing just this!</em></strong></p>
<h1 id="further-reading">Further reading</h1>
<p><a href="https://doc.rust-lang.org/stable/book/ch00-00-introduction.html">The Rust book</a>
A great writeup by the Rust community you should now be ready to tackle,
which goes in great depth about programming in relation to memory and other lower level concepts.
I‚Äôve seen many who think this is unimportant, but it‚Äôll help you optimize and build better,
less buggy products.</p>
<p>To further your understanding, I recommend watching
<a href="https://youtube.com/c/Fireship">Fireship‚Äôs YouTube channel</a>
as he produces quality content about new and relevant technologies.</p>
<p>For more insight into a life of a developer, see
<a href="https://youtube.com/c/BenAwad97">Ben Awad‚Äôs channel</a>.</p>
<p>But most importantly, if you get an idea, write it down, think about it,
and begin coding it. <a href="https://search.brave.com">Searching</a> for help is your best friend here,
Stack Overflow is a great place for info about common problems.
If you program in JS, the
<a href="https://developer.mozilla.org">MDN</a> is a great place for finding reference material.</p>
<p>Last edited at Mon, 2022-03-28, 20:58 +02:00.</p>
</md></main>
$[footer]
